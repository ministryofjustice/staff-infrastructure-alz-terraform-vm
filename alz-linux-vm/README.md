<!-- BEGIN_TF_DOCS -->

## Requirements

| Name                                                                     | Version  |
| ------------------------------------------------------------------------ | -------- |
| <a name="requirement_terraform"></a> [terraform](#requirement_terraform) | >=1.5.3  |
| <a name="requirement_azurerm"></a> [azurerm](#requirement_azurerm)       | >=3.33.0 |
| <a name="requirement_random"></a> [random](#requirement_random)          | >=3.3.0  |

## Providers

| Name                                                         | Version  |
| ------------------------------------------------------------ | -------- |
| <a name="provider_azurerm"></a> [azurerm](#provider_azurerm) | >=3.33.0 |
| <a name="provider_random"></a> [random](#provider_random)    | >=3.3.0  |

## Modules

No modules.

## Resources

| Name                                                                                                                                                                                   | Type        |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------- |
| [azurerm_key_vault_secret.alz_linux_passwords](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/key_vault_secret)                                       | resource    |
| [azurerm_linux_virtual_machine.alz_linux](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/linux_virtual_machine)                                       | resource    |
| [azurerm_managed_disk.alz_linux](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/managed_disk)                                                         | resource    |
| [azurerm_monitor_data_collection_rule_association.alz_linux](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/monitor_data_collection_rule_association) | resource    |
| [azurerm_network_interface.alz_linux](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/network_interface)                                               | resource    |
| [azurerm_user_assigned_identity.alz_linux](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/user_assigned_identity)                                     | resource    |
| [azurerm_virtual_machine_data_disk_attachment.alz_linux](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/virtual_machine_data_disk_attachment)         | resource    |
| [azurerm_virtual_machine_extension.alz_linux_ama](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/virtual_machine_extension)                           | resource    |
| [random_password.alz_linux](https://registry.terraform.io/providers/hashicorp/random/latest/docs/resources/password)                                                                   | resource    |
| [random_string.alz_linux_identity](https://registry.terraform.io/providers/hashicorp/random/latest/docs/resources/string)                                                              | resource    |
| [azurerm_key_vault.core_spoke_keyvault](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/key_vault)                                                  | data source |
| [azurerm_monitor_data_collection_rule.azure_monitor](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/monitor_data_collection_rule)                  | data source |
| [azurerm_resource_group.alz_linux](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/resource_group)                                                  | data source |
| [azurerm_storage_account.spoke_log_diag_sa](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/storage_account)                                        | data source |
| [azurerm_subnet.alz_linux](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/subnet)                                                                  | data source |

## Inputs

| Name                                                                                                                                                               | Description                                                                                     | Type                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Default | Required |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------- | :------: |
| <a name="input_data_collection_rule_monitor_name"></a> [data_collection_rule_monitor_name](#input_data_collection_rule_monitor_name)                               | Name of the data collection rule used for Azure monitor agent data streams                      | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `null`  |    no    |
| <a name="input_data_collection_rule_monitor_resource_group"></a> [data_collection_rule_monitor_resource_group](#input_data_collection_rule_monitor_resource_group) | Resource group that contains the data collection rule used for Azure monitor agent data streams | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `null`  |    no    |
| <a name="input_keyvault_name"></a> [keyvault_name](#input_keyvault_name)                                                                                           | User account credentials are generated and pushed here                                          | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | n/a     |   yes    |
| <a name="input_keyvault_rg"></a> [keyvault_rg](#input_keyvault_rg)                                                                                                 | Keyvault for credential storage Resource Group                                                  | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | n/a     |   yes    |
| <a name="input_log_analytics_workspace_name"></a> [log_analytics_workspace_name](#input_log_analytics_workspace_name)                                              | Log analytics workspace to connect the MMA agent to. Not used on Linux version of this module.  | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `null`  |    no    |
| <a name="input_recovery_vault_name"></a> [recovery_vault_name](#input_recovery_vault_name)                                                                         | Vault used for backups - must be provided if any VM specifies 'backup' = 'true'                 | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `null`  |    no    |
| <a name="input_recovery_vault_resource_group"></a> [recovery_vault_resource_group](#input_recovery_vault_resource_group)                                           | Vault resource group - - must be provided if any VM specifies 'backup' = 'true'                 | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `null`  |    no    |
| <a name="input_resource_group"></a> [resource_group](#input_resource_group)                                                                                        | Resource group to create the Virtual Machine(s) in                                              | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | n/a     |   yes    |
| <a name="input_storage_account_boot_diag_name"></a> [storage_account_boot_diag_name](#input_storage_account_boot_diag_name)                                        | Storage account to store Boot diagnostic logs for Virtual Machine(s)                            | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | n/a     |   yes    |
| <a name="input_storage_account_boot_diag_resource_group"></a> [storage_account_boot_diag_resource_group](#input_storage_account_boot_diag_resource_group)          | Boot diagnostic Storage Account Resource Group                                                  | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | n/a     |   yes    |
| <a name="input_vm_specifications"></a> [vm_specifications](#input_vm_specifications)                                                                               | Configuration parameters for each Virtual Machine specified                                     | <pre>map(object({<br> vm_size = string<br> marketplace_image = optional(bool, false)<br> marketplace_plan = optional(map(string))<br> zone = string<br> publisher = string<br> offer = string<br> sku = string<br> version = string<br> os_disk_type = optional(string, "Standard_LRS")<br> admin_user = optional(string, "azureuser")<br> patch_mode = optional(string, "AutomaticByPlatform")<br> patch_assessment_mode = optional(string, "AutomaticByPlatform")<br> provision_vm_agent = optional(bool, true)<br> scheduled_shutdown = optional(bool, false)<br> monitor = optional(bool, false)<br> backup = optional(bool)<br> enable_host_enc = optional(bool)<br><br> network = map(object({<br> vnet = string<br> vnet_resource_group = string<br> subnet = string<br> ip_address = string<br> public_ip_id = optional(string)<br> custom_dns_servers = optional(list(string))<br> enable_accelerated_networking = optional(bool)<br> enable_ip_forwarding = optional(bool)<br> }))<br> data_disks = map(object({<br> size = number<br> lun = number<br> type = string<br> create_option = string<br> }))<br> tags = map(string)<br> }))</pre> | n/a     |   yes    |

## Outputs

| Name                                                                       | Description                             |
| -------------------------------------------------------------------------- | --------------------------------------- |
| <a name="output_nics"></a> [nics](#output_nics)                            | Resource ID's for all created NICs      |
| <a name="output_vm_identities"></a> [vm_identities](#output_vm_identities) | Managed identities for all created VM's |
| <a name="output_vm_ids"></a> [vm_ids](#output_vm_ids)                      | Resource ID's for all created VM's      |

<!-- END_TF_DOCS -->
